<?xml version="1.0" encoding="UTF-8"?>
<templates xml:space="preserve">

<t t-name="mail.call_main" owl="1">
    <div class="o-mail-call-main d-flex flex-grow-1 flex-column align-items-center justify-content-center position-relative bg-black-50" t-ref="root" t-on-mouseleave="onMouseleave">
        <div
            class="o-mail-call-main-grid d-flex align-items-center overflow-hidden h-100 w-100 flex-wrap justify-content-center"
            t-attf-style="--height:{{state.tileHeight}}px; --width:{{state.tileWidth}}px;"
            t-on-click="onClick"
            t-on-mousemove="onMouseMove"
            t-ref="grid"
        >
            <CallParticipantCard t-foreach="[...Object.values(props.thread.rtcSessions)]" t-as="session" t-key="session.id"
                className="'o-mail-call-main-gridParticipantCard'"
                session="session"
            />
        </div>

        <!-- Buttons -->
        <t t-if="hasSidebarButton">
            <i t-if="isSidebarOpen" class="o-mail-call-main-sidebarButton cursor-pointer position-absolute fa fa-arrow-right" title="Hide sidebar" t-on-click="onClickHideSidebar"/>
            <i t-else="" class="o-mail-call-main-sidebarButton cursor-pointer position-absolute fa fa-arrow-left" title="Show sidebar" t-on-click="onClickShowSidebar"/>
        </t>
        <div t-if="showOverlay or !isControllerFloating" class="o-mail-call-main-controls d-flex justify-content-center w-100 pb-1" t-att-class="{ 'o-isFloating position-absolute bottom-0 pb-3': isControllerFloating }">
            <div class="o-mail-call-main-controlsOverlayContainer" t-on-mousemove="onMouseMoveOverlay">
                <CallActionList thread="props.thread" fullscreen="props.fullscreen"/>
            </div>
        </div>
    </div>
</t>

</templates>
