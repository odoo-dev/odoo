<?xml version="1.0" encoding="UTF-8"?>
<templates xml:space="preserve">

    <aside
        class="o_Chatter"
        owl="1"
        t-att-data-id="id"
        t-name="mail.component.Chatter">
        <div
            class="o_Chatter_topbar"
            t-ref="topbar">
            <button
                class="
                    btn
                    btn-link
                    o_Chatter_button
                    o_Chatter_buttonNewMessage
                    o_Chatter_topbarButton"
                title="Send a message"
                type="button"
                t-att-class="{
                    'o-active': state.hasComposer and
                        !state.isComposerLog,
                }"
                t-att-disabled="props.record.res_id ? '' : 'disabled'"
                t-on-click="_onClickSend">
                Send message
            </button>
            <button
                class="
                    btn
                    btn-link
                    o_Chatter_button
                    o_Chatter_buttonLogNote
                    o_Chatter_topbarButton"
                title="Log a note. Followers will not be notified."
                t-att-class="{
                    'o-active': state.hasComposer and
                        state.isComposerLog,
                }"
                t-att-disabled="props.record.res_id ? '' : 'disabled'"
                t-if="hasLogButton"
                t-on-click="_onClickLog">
                Log note
            </button>
            <button
                class="
                    btn
                    btn-link
                    o_Chatter_button
                    o_Chatter_buttonScheduleActivity
                    o_Chatter_topbarButton"
                title="Log or schedule an activity"
                t-att-disabled="props.record.res_id ? '' : 'disabled'"
                t-if="props.mailFields.mail_activity"
                t-on-click="_onClickScheduleActivity">
                <i
                    aria-label="Dates"
                    class="
                        fa
                        fa-clock-o"
                    role="img"
                    title="Dates"/> Schedule activity
            </button>
            <div
                class="o_Chatter_topbarRightArea"
                t-ref="topbarRightArea">
                <button
                    class="
                        btn
                        btn-link
                        o_Chatter_button
                        o_Chatter_buttonAttachment"
                    title="View all the attachments of the current record"
                    t-att-disabled="props.record.res_id ? '' : 'disabled'"
                    t-attf-class="{
                        'o-active': state.isAttachmentBoxOpen,
                    }"
                    t-on-click="_onAttachmentClick">
                    <span>
                        <i
                            class="
                                fa
                                fa-paperclip"/>
                        <span
                            class="o_chatter_buttonAttachmentCounter"
                            t-if="props.mailFields.mail_thread"> <t t-esc="props.record.data.message_attachment_count || 0"/>
                        </span>
                    </span>
                </button>
            </div>
        </div>
        <AttachmentBox
            class="o_Chatter_attachmentBox"
            resId="props.record.res_id"
            resModel="props.record.model"
            t-if="state.isAttachmentBoxOpen"/>
        <Composer
            areButtonsInline="false"
            class="o_Chatter_composer"
            hasFollowers="true"
            id="id + '_composer'"
            isExpandable="true"
            isLog="state.isComposerLog"
            suggestedRecipients="props.suggestedRecipients"
            threadLocalId="props.threadLocalId"
            t-if="state.hasComposer"
            t-on-o-full-composer-opened.stop="_onFullComposerOpened"
            t-on-o-message-posted.stop="_onMessagePosted"/>
        <div
            t-if="props.mailFields.mail_activity"
            t-ref="activity"/>
        <Thread
            class="o_Chatter_thread"
            hasComposer="false"
            order="'desc'"
            threadLocalId="props.threadLocalId"
            t-if="props.thread"/>
    </aside>

</templates>
