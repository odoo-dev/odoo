<?xml version="1.0" encoding="UTF-8"?>
<templates xml:space="preserve">

    <t t-name="mail.component.Attachment" owl="1">
        <div class="o_Attachment"
            t-att-class="{
                'o-basic-layout': props.layout === 'basic',
                'o-card-layout': props.layout === 'card',
                'o-downloadable': props.isDownloadable,
                'o-editable': props.isEditable,
                'o-temporary': storeProps.attachment.isTemporary,
                'o-viewable': storeGetters.isAttachmentViewable(props.attachmentLocalId),
            }" t-att-data-attachment-local-id="storeProps.attachment.localId" t-att-title="storeGetters.attachmentDisplayName(props.attachmentLocalId)">
            <t t-if="props.layout === 'basic'">
                <t t-if="storeGetters.attachmentFileType(props.attachmentLocalId) !== 'image'">
                    <!-- o_image from mimetype.scss -->
                    <div t-att-href="attachmentUrl" class="o_Attachment_image o_image" t-att-class="{ 'o-attachment-viewable': storeGetters.isAttachmentViewable(props.attachmentLocalId) }" t-on-click="_onClickImage" t-att-data-mimetype="storeProps.attachment.mimetype"/>
                </t>
                <t t-else="">
                    <!-- o_image from mimetype.scss -->
                    <img class="o_Attachment_image o_image" t-att-class="{ 'o-attachment-viewable': storeGetters.isAttachmentViewable(props.attachmentLocalId) }" t-attf-src="web/image/{{ storeProps.attachment.id }}/160x160" t-on-click="_onClickImage" t-att-data-mimetype="storeProps.attachment.mimetype"/>
                </t>
            </t>
            <t t-elif="props.layout === 'card'">
                <!-- o_image from mimetype.scss -->
                <div t-att-href="attachmentUrl" class="o_Attachment_image o_image o-attachment-card-layout" t-att-class="{ 'o-attachment-viewable': storeGetters.isAttachmentViewable(props.attachmentLocalId) }" t-on-click="_onClickImage" t-att-style="storeGetters.attachmentFileType(props.attachmentLocalId) === 'image' ? 'background-image:url(/web/image/' + storeProps.attachment.id + '/38x38/?crop=true' : ''" t-att-data-mimetype="storeProps.attachment.mimetype"/>
                <t t-if="props.hasLabelForCardLayout">
                    <div class="o_Attachment_main">
                        <div class="o_Attachment_filename">
                            <t t-esc="storeProps.attachment.filename"/>
                        </div>
                        <div class="o_Attachment_extension">
                            <t t-esc="storeGetters.attachmentExtension(props.attachmentLocalId)"/>
                        </div>
                    </div>
                </t>
                <div class="o_Attachment_aside">
                    <t t-if="storeProps.attachment.composerId and storeProps.attachment.isTemporary">
                        <div class="o_Attachment_asideItem o_Attachment_asideItemUploading" title="Uploading" aria-label="Uploading" t-key="'uploading'">
                            <i class="fa fa-spin fa-spinner"/>
                        </div>
                    </t>
                    <t t-if="storeProps.attachment.composerId and !storeProps.attachment.isTemporary">
                        <div class="o_Attachment_asideItem o_Attachment_asideItemUploaded" title="Uploaded" aria-label="Uploaded" t-key="'uploaded'">
                            <i class="fa fa-check"/>
                        </div>
                    </t>
                    <t t-if="props.isEditable and !storeProps.attachment.isTemporary">
                        <div class="o_Attachment_asideItem o_Attachment_asideItemUnlink" t-att-class="{ 'o-pretty': storeProps.attachment.composerId }" t-on-click="_onClickUnlink" title="Remove" aria-label="Remove" t-key="'unlink'">
                            <i class="fa fa-times"/>
                        </div>
                    </t>
                    <t t-if="props.isDownloadable and !storeProps.attachment.isTemporary">
                        <div class="o_Attachment_asideItem o_Attachment_asideItemDownload" t-on-click="_onClickDownload" title="Download" aria-label="Download" t-key="'download'">
                            <i class="fa fa-download"/>
                        </div>
                    </t>
                </div>
            </t>
        </div>
    </t>

</templates>
