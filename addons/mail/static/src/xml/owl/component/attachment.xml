<?xml version="1.0" encoding="UTF-8"?>
<templates xml:space="preserve">

    <div
        class="o_Attachment"
        owl="1"
        t-att-class="{
            'o-downloadable': props.isDownloadable,
            'o-editable': props.isEditable,
            'o-has-card-details': detailsMode === 'card',
            'o-temporary': storeProps.attachment.isTemporary,
            'o-viewable':
                props.allowPreview and
                env.store.getters.isAttachmentViewable(props.attachmentLocalId),
        }"
        t-att-data-attachment-local-id="storeProps.attachment.localId"
        t-att-title="env.store.getters.attachmentDisplayName(props.attachmentLocalId)"
        t-name="mail.component.Attachment">
        <!-- Image style-->
        <!-- o_image from mimetype.scss -->
        <div
            class="
                o_Attachment_image
                o_image"
            t-att-class="{
                'o-attachment-viewable':
                    props.allowPreview and
                    env.store.getters.isAttachmentViewable(props.attachmentLocalId),
                'o-details-overlay': detailsMode !== 'card'
            }"
            t-att-data-mimetype="storeProps.attachment.mimetype"
            t-att-href="attachmentUrl"
            t-att-style="imageStyle"
            t-on-click="_onClickImage">
            <div
                class="o_Attachment_imageOverlay"
                t-if="
                    (props.showFilename or props.showExtension) and
                    detailsMode === 'hover'">
                <div class="o_Attachment_details o_Attachment_imageOverlayDetails">
                    <div class="o_Attachment_filename" t-if="props.showFilename">
                        <t t-esc="storeProps.attachment.filename"/>
                    </div>
                    <div class="o_Attachment_extension" t-if="props.showExtension">
                        <t t-esc="env.store.getters.attachmentExtension(props.attachmentLocalId)"/>
                    </div>
                </div>
                <div class="o_Attachment_actions">
                    <!-- Remove button -->
                    <div
                        aria-label="Remove"
                        class="
                            o_Attachment_action
                            o_Attachment_actionUnlink"
                        t-att-class="{
                            'o-pretty': env.store.getters.isAttachmentLinkedToComposer(props.attachmentLocalId),
                        }"
                        title="Remove"
                        t-if="
                            props.isEditable and
                            !storeProps.attachment.isTemporary"
                        t-key="'unlink'"
                        t-on-click.stop="_onClickUnlink">
                        <i
                            class="
                                fa
                                fa-times"/>
                    </div>
                    <!-- Download button -->
                    <div
                        aria-label="Download"
                        class="
                            o_Attachment_action
                            o_Attachment_actionDownload"
                        title="Download"
                        t-if="
                            props.isDownloadable and
                            !storeProps.attachment.isTemporary"
                        t-key="'download'"
                        t-on-click.stop="_onClickDownload">
                        <i
                            class="
                                fa
                                fa-download"/>
                        </div>
                </div>
            </div>
        </div>
        <!-- Attachment details -->
        <div
            class="o_Attachment_details"
            t-if="
                (props.showFilename or props.showExtension) and
                detailsMode === 'card'">
            <div class="o_Attachment_filename" t-if="props.showFilename">
                <t t-esc="storeProps.attachment.filename"/>
            </div>
            <div class="o_Attachment_extension" t-if="props.showExtension">
                <t t-esc="env.store.getters.attachmentExtension(props.attachmentLocalId)"/>
            </div>
        </div>
        <!-- Attachment aside -->
        <div
            class="o_Attachment_aside"
            owl="1"
            t-att-class="{
                'o-has-multiple-action':
                    !storeProps.attachment.isTemporary and
                    props.isDownloadable and
                    props.isEditable
            }"
            t-if="
                detailsMode !== 'hover' and
                (props.isDownloadable or
                props.isEditable)">
            <!-- Uploading icon -->
            <div
                aria-label="Uploading"
                class="
                    o_Attachment_asideItem
                    o_Attachment_asideItemUploading"
                title="Uploading"
                t-if="
                    env.store.getters.isAttachmentLinkedToComposer(props.attachmentLocalId) and
                    storeProps.attachment.isTemporary"
                t-key="'uploading'">
                <i
                    class="
                        fa
                        fa-spin
                        fa-spinner"/>
            </div>
            <!-- Uploaded icon -->
            <div
                aria-label="Uploaded"
                class="
                    o_Attachment_asideItem
                    o_Attachment_asideItemUploaded"
                title="Uploaded"
                t-if="
                    env.store.getters.isAttachmentLinkedToComposer(props.attachmentLocalId) and
                    !storeProps.attachment.isTemporary"
                t-key="'uploaded'">
                <i
                    class="
                        fa
                        fa-check"/>
            </div>
            <!-- Remove button -->
            <div
                aria-label="Remove"
                class="
                    o_Attachment_asideItem
                    o_Attachment_asideItemUnlink"
                t-att-class="{
                    'o-pretty': env.store.getters.isAttachmentLinkedToComposer(props.attachmentLocalId),
                }"
                title="Remove"
                t-if="
                    props.isEditable and
                    !storeProps.attachment.isTemporary"
                t-key="'unlink'"
                t-on-click="_onClickUnlink">
                <i
                    class="
                        fa
                        fa-times"/>
            </div>
            <!-- Download button -->
            <div
                aria-label="Download"
                class="
                    o_Attachment_asideItem
                    o_Attachment_asideItemDownload"
                title="Download"
                t-if="
                    props.isDownloadable and
                    !storeProps.attachment.isTemporary"
                t-key="'download'"
                t-on-click="_onClickDownload">
                <i
                    class="
                        fa
                        fa-download"/>
            </div>
        </div>
    </div>

</templates>
