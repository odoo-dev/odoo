<?xml version="1.0" encoding="UTF-8"?>
<templates xml:space="preserve">
    <t t-name="mail.Poll">
        <div class="card border-light shadow-sm my-2" style="max-width: 500px;">
            <div class="card-body d-flex flex-column gap-1 p-3">
                <p class="card-title text-start fw-bold fs-5 mb-0" t-esc="props.poll.question"/>
                <p class="card-subtitle mb-2 text-muted">Select an answer</p>
                <t t-foreach="props.poll.answer_ids" t-as="answer" t-key="answer.id" t-call="mail.PollAnswer"/>
                <div class="d-flex align-items-center mt-2">
                    <p class="small text-muted m-0">
                        0
                        <t t-if="props.poll.numberOfVotes > 1">votes</t>
                        <t t-else="">vote</t>
                        &#8729; 23 h restantes
                    </p>
                    <span class="flex-grow-1"/>
                    <t t-if="state.showResults">
                        <button class="btn btn-secondary" t-on-click="toggleShowResults">Go back to vote</button>
                    </t>
                    <t t-else="">
                        <a href="#" class="me-2" t-on-click="toggleShowResults">View results</a>
                        <button class="btn btn-primary">Vote</button>
                    </t>
                </div>
            </div>
        </div>
    </t>

    <t t-name="mail.PollAnswer">
        <label class="o-discuss-PollAnswer d-flex justify-content-between p-2 rounded border" t-att-class="{
            'border-300 text-bg-300': state.checkedByAnswerId[answer.id],
            'border-secondary': !state.checkedByAnswerId[answer.id],
            'cursor-pointer': canVote,
            'o-discuss-PollComponent-showResults': state.showResults,
        }">
            <span class="fw-bold me-1" t-esc="answer.text"/>
            <span t-if="state.showResults" class="flex-shrink-0">
                <span class="fw-bold me-1 smaller">
                    <t t-esc="answer.voting_partner_ids.length"/>
                    <t t-if="answer.voting_partner_ids.length > 1"> votes</t>
                    <t t-else=""> vote</t>
                </span>
                <span class="fw-bold">&#8729; 0 %</span>
            </span>
            <input t-else="" class="form-check-input" t-model="state.checkedByAnswerId[answer.id]" type="checkbox"/>
        </label>
    </t>
</templates>
