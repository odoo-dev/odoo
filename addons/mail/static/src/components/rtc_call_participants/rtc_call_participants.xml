<?xml version="1.0" encoding="UTF-8"?>
<templates xml:space="preserve">

    <t t-name="mail.RtcCallParticipants" owl="1">
        <div class="o_RtcCallParticipants bg-light">
            <div t-if="env.messaging.userSetting.isOpen">
                <UserSettingWindow/>
            </div>
            <div class="o_RtcCallParticipants_memberList">
                <t t-foreach="thread.callParticipants" t-as="member" t-key="member.id">
                    <t t-set="partner" t-value="member.partner"/>
                    <span class="o_RtcCallParticipants_member">
                        <img alt="Avatar"
                             class="o_RtcCallParticipants_member_avatar rounded-circle"
                             t-att-class="{ 'o-is-talking': env.mailRtc.isPartnerTalking(member.peerToken) }"
                             t-attf-src="/web/image/res.partner/{{ partner.id }}/avatar_128"
                        />
                        <span class="o_RtcCallParticipants_member_name" t-esc="partner.nameOrDisplayName"/>
                        <t t-if="env.mailRtc.activeVideoStreams[member.peerToken]">
                            <span class="o_RtcCallParticipants_member_liveIndicator badge-pill"
                                  t-att-class="{ 'o-not-viewed': !!env.messaging.focusedVideoPartner and env.messaging.focusedVideoPartner.id !== partner.id }"
                                  t-on-click="_onLiveClick(partner.id)">
                                LIVE
                            </span>
                        </t>
                        <t t-if="env.mailRtc.isPartnerMute(member.peerToken)">
                            <i class="o_RtcCallParticipants_member_muteIndicator fa fa-lg fa-microphone-slash"/>
                        </t>
                        <t t-if="env.messaging.currentPartner !== member.partner">
                            <t t-if="!['connected', 'completed'].includes(env.mailRtc.connectionStates[member.peerToken])">
                                <i class="fa fa-lg fa-signal o_RtcCallParticipants_member_signal"
                                   t-att-title="env.mailRtc.connectionStates[partner.peerToken]"/>
                            </t>
                        </t>
                    </span>
                </t>
            </div>
        </div>
    </t>

</templates>
