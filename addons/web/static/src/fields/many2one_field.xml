<?xml version="1.0" encoding="UTF-8"?>
<templates xml:space="preserve">

    <t t-name="web.Many2OneField" owl="1">
        <t t-if="props.readonly">
            <t t-if="!props.canOpen">
                <span>
                    <span t-esc="displayName" />
                    <t t-foreach="extraLines" t-as="extraLine" t-key="extraLine_index">
                        <br />
                        <span t-esc="extraLine" />
                    </t>
                </span>
            </t>
            <t t-else="">
                <a
                    class="o_form_uri"
                    t-att-href="props.value ? `#id=${props.value[0]}&amp;model=${props.relation}` : '#'"
                    t-on-click.prevent="onClick"
                >
                    <span t-esc="displayName" />
                    <t t-foreach="extraLines" t-as="extraLine" t-key="extraLine_index">
                        <br />
                        <span t-esc="extraLine" />
                    </t>
                </a>
            </t>
        </t>
        <t t-else="">
            <div
                class="o_field_many2one"
                aria-atomic="true"
                t-att-class="{ 'o_with_button': hasExternalButton }"
            >
                <div class="o_field_many2one_selection">
                    <div class="o_input_dropdown">
                        <AutoComplete
                            value="displayName"
                            placeholder="props.placeholder"
                            sources="sources"
                            onSelect.bind="onSelect"
                            autoSelect="true"
                            onInput.bind="onInput"
                            onChange.bind="onChange"
                        />
                        <a role="button" class="o_dropdown_button" draggable="false" />
                    </div>
                    <t t-if="hasExternalButton">
                        <button
                            type="button"
                            class="btn btn-secondary fa fa-external-link o_external_button"
                            tabindex="-1"
                            draggable="false"
                            aria-label="External link"
                            data-tooltip="External link"
                            t-on-click="onExternalBtnClick"
                        />
                    </t>
                </div>
                <div class="o_field_many2one_extra">
                    <t t-foreach="extraLines" t-as="extraLine" t-key="extraLine_index">
                        <br t-if="!extraLine_first" />
                        <span t-esc="extraLine" />
                    </t>
                </div>
            </div>
        </t>
    </t>

</templates>
