<?xml version="1.0" encoding="UTF-8"?>
<templates xml:space="preserve">

    <t t-name="web.ProgressBarField" owl="1">
        <t t-if="props.readonly">
            <div class="o_progressbar">
                <div class="o_progress" aria-valuemin="0" t-att-aria-valuemax="state.maxValue" t-att-aria-valuenow="state.currentValue">
                    <div class="o_progressbar_complete" t-att-style="'width: min(' + 100 * state.currentValue / state.maxValue + '%, 100%)'"></div>
                </div>
                <t t-if="props.maxValue">
                    <div class="o_progressbar_value" t-esc="state.currentValue + ' / ' + state.maxValue"/>
                </t>
                <t t-else="">
                    <PercentageViewer
                        fieldClass="'o_progressbar_value'"
                        isPercentage="true"
                        value="state.currentValue"
                    />
                </t>
            </div>
        </t>
        <t t-else="">
            <div class="o_progressbar d-flex">
                <div class="o_progress" aria-valuemin="0" t-att-aria-valuemax="state.maxValue" t-att-aria-valuenow="state.currentValue">
                    <div class="o_progressbar_complete" t-att-style="'width: min(' + 100 * state.currentValue / state.maxValue + '%, 100%)'"></div>
                </div>
                <t t-if="props.maxValue">
                    <t t-if="(props.editable and !props.editMaxValue) or props.editCurrentValue">
                        <input
                            class="o_progressbar_value o_input"
                            type="text"
                            inputmode="numeric"
                            t-att-value="state.currentValue"
                            t-on-change="onChangeCurrentValue"
                            t-on-keydown="onKeyDownCurrentValue"
                        />
                    </t>
                    <t t-else="">
                        <span class="o_progressbar_value" t-esc="state.currentValue"/>
                    </t>
                    <span>/</span>
                    <t t-if="props.editMaxValue">
                        <input
                            class="o_progressbar_value o_input"
                            type="text"
                            inputmode="numeric"
                            t-att-value="state.maxValue"
                            t-on-change="onChangeMaxValue"
                            t-on-keydown="onKeyDownMaxValue"
                        />
                    </t>
                    <t t-else="">
                        <span class="o_progressbar_value" t-esc="state.maxValue"/>
                    </t>
                </t>
                <t t-else="">
                    <PercentageEditor
                        fieldClass="'o_progressbar_value'"
                        isPercentage="true"
                        onChange="(ev) => onChangeCurrentValue(ev)"
                        onKeydown="(ev) => onKeyDownCurrentValue(ev)"
                        value="state.currentValue"
                    />
                </t>
            </div>
        </t>
    </t>

</templates>

