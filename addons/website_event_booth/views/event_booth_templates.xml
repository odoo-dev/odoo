<?xml version="1.0" encoding="UTF-8" ?>
<odoo><data>

    <template id="event_booth_layout" name="Event Booth Layout">
        <t t-call="website_event.layout">
            <div class="o_wevent_booth_registration" name="event" t-att-data-event-id="event.id"
                 itemscope="itemscope" itemtype="http://schema.org/Event">
                <t t-call="website.record_cover">
                    <t t-set="_record" t-value="event"/>
                    <t t-set="use_filters" t-value="True"/>
                    <t t-set="use_text_align" t-value="True"/>
                    <t t-set="additionnal_classes" t-value="'pb128'"/>

                    <div class="container d-flex flex-column flex-grow-1">
                        <h1 class="text-white my-5">Get A Booth</h1>
                        <div t-if="not event.event_booth_ids" class="alert alert-info">
                            <span>This event is not open to exhibitors registration, check our <a href="/event">list of future events</a>.</span>
                        </div>
                    </div>
                </t>
                <section class="mt-n5">
                    <div class="container overflow-hidden">
                        <div class="row mb64 bg-white no-gutters rounded shadow-sm">
                            <t t-out="0"/>
                        </div>
                    </div>
                </section>
            </div>
        </t>
    </template>

    <template id="event_booth_registration" name="Event Booth Registration">
        <t t-call="website_event_booth.event_booth_layout">
            <t t-if="event.event_booth_ids">
                <div class="col-lg-9 p-4">
                    <form method="post" t-attf-action="/event/#{slug(event)}/booths/register/proceed"
                          id="booth-registration" class="form-horizontal justify-content-center mt32" t-att-data-event-id="event.id">
                        <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>
                        <div class="row form-group justify-content-center">
                            <t t-foreach="event.event_booth_category_ids" t-as="booth_category">
                                <t t-set="booth_category_unavailable" t-value="booth_category not in available_booth_category_ids"/>
                                <div class="col-md-4">
                                    <label t-att-class="'o_wevent_booth_category_unavailable' if booth_category_unavailable else ''">
                                        <input type="radio" name="booth_category_id" t-att-value="booth_category.id"
                                               t-att-disabled="booth_category_unavailable"/>
                                        <div>
                                            <h5><t t-esc="booth_category.name"/></h5>
                                            <span class="img img-responsive">
                                                <img class="img img-fluid" t-att-title="booth_category.name" t-att-src="website.image_url(booth_category, 'image_256')"/>
                                            </span>
                                        </div>
                                        <div t-if="booth_category_unavailable" class="o_ribbon_right bg-danger">
                                            <span>Unavailable</span>
                                        </div>
                                    </label>
                                </div>
                            </t>
                        </div>
                        <div class="row form-group">
                            <div class="col-sm-2 offset-sm-1">
                                <label for="booth_id" class="control-label">Booths</label>
                            </div>
                            <div class="col-sm-6 o_wevent_booths"/>
                            <div t-if="event.exhibition_map" class="col-sm-3 text-right">
                                <button type="button" class="btn btn-info" data-toggle="modal" data-target="#mapModal">View Floor Plan</button>
                                <div role="dialog" id="mapModal" class="modal" tabindex="-1">
                                    <div class="modal-dialog modal-lg">
                                        <div class="modal-content">
                                            <div class="modal-body">
                                                <div t-field="event.exhibition_map" t-options="{'widget': 'image'}" class="img img-responsive"/>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="alert alert-danger col-12 o_wevent_booth_unavailable_alert d-none" role="alert">
                                <i class="fa fa-exclamation-triangle"/>
                                <span>Careful, several booths are now unavailable. Please change your choices before validating again.</span>
                            </div>
                        </div>
                        <div class="form-group" name="booth_registration_submit">
                            <div class="col-sm-6 offset-sm-3 mt-5">
                                <button type="submit" class="btn btn-primary btn-block font-weight-bold booth-submit" disabled="true">
                                    <span t-if="request.env.user._is_public()">Continue</span>
                                    <span t-else="">Book My Booth</span>
                                </button>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="col-lg-3 bg-200 hidden-sm hidden-xs py-4">
                    <t t-foreach="event.event_booth_category_ids" t-as="booth_category">
                        <div t-attf-id="booth_description_#{booth_category.id}"
                             class="o_wevent_booth_description d-none" t-field="booth_category.description"/>
                    </t>
                </div>
            </t>
        </t>
    </template>

    <template id="event_booth_details" name="Event Booth Details">
        <t t-call="website_event_booth.event_booth_layout">
            <form method="post" t-attf-action="/event/#{slug(event)}/booths/register/confirm"
                  class="col-12 px-5 py-2" id="contact_details_form">
                <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>
                <input type="hidden" name="booth_category_id" t-att-value="booth_category_id.id"/>
                <input type="hidden" name="event_booth_ids" t-att-value="event_booth_ids"/>
                <div id="o_wevent_contact_details">
                    <h4 class="mt32">
                        <strong>Contact Details</strong>
                    </h4>
                    <div class="row form-group">
                        <label class="col-form-label col-sm-auto">Name</label>
                        <div class="col-sm">
                            <input type="text" class="form-control" name="contact_name" required="True"/>
                        </div>
                    </div>
                    <div class="row form-group">
                        <label class="col-form-label col-sm-auto">Email</label>
                        <div class="col-sm">
                            <input type="email" class="form-control" name="contact_email" required="True"/>
                        </div>
                    </div>
                    <div class="row form-group">
                        <label class="col-form-label col-sm-auto">Phone <small>(Optional)</small></label>
                        <div class="col-sm">
                            <input type="tel" class="form-control" name="contact_phone"/>
                        </div>
                    </div>
                    <div class="row form-group">
                        <label class="col-form-label col-sm-auto">Mobile <small>(Optional)</small></label>
                        <div class="col-sm">
                            <input type="tel" class="form-control" name="contact_mobile"/>
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <div class="col-sm-6 offset-sm-3 mt-5">
                        <button type="submit" class="btn btn-primary btn-block font-weight-bold">Book My Booth</button>
                    </div>
                </div>
            </form>
        </t>
    </template>

    <template id="event_booth_registration_complete" name="Event Booth Registration Complete">
        <t t-call="website_event_booth.event_booth_layout">
            <div class="col-12 p-5">
                <div class="row mb-3">
                    <div class="col-12">
                        <h3>Booth Registration Completed</h3>
                        <span class="h4 text-muted" t-esc="event.name"/>
                    </div>
                </div>
                <div class="d-flex flex-column">
                    <span class="font-weight-bold">
                        <t t-if="partner.name" t-esc="partner.name"/>
                        <t t-else="">N/A</t>
                    </span>
                    <span>
                        <i class="fa fa-envelope mr-2"/>
                        <t t-if="partner.email" t-esc="partner.email"/>
                        <t t-else="">N/A</t>
                    </span>
                    <span>
                        <i class="fa fa-phone mr-2"/>
                        <t t-if="partner.phone" t-esc="partner.phone"/>
                        <t t-else="">N/A</t>
                    </span>
                    <span>
                        <i class="fa fa-mobile mr-2"/>
                        <t t-if="partner.mobile" t-esc="partner.mobile"/>
                        <t t-else="">N/A</t>
                    </span>
                </div>
            </div>
        </t>
    </template>

</data></odoo>
