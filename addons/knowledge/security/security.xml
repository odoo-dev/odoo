<?xml version="1.0" encoding="utf-8"?>
<odoo noupdate="1">
    <!-- knowledge article -->
    <record id="knowledge_system_all_articles" model="ir.rule">
        <field name="name">All articles</field>
        <field name="model_id" ref="model_knowledge_article"/>
        <field name="domain_force">[(1,'=',1)]</field>
        <field name="groups" eval="[(4, ref('base.group_system'))]"/>
    </record>

    <record id="knowledge_user_read_articles" model="ir.rule">
        <field name="name">Read articles</field>
        <field name="model_id" ref="model_knowledge_article"/>
        <field name="perm_write" eval="False"/>
        <field name="perm_create" eval="False"/>
        <field name="perm_unlink" eval="False"/>
        <field name="domain_force">[('user_has_access', '=', True)]</field>
        <field name="groups" eval="[(4, ref('base.group_user'))]"/>
    </record>

    <record id="knowledge_user_write_articles" model="ir.rule">
        <field name="name">Write articles</field>
        <field name="model_id" ref="model_knowledge_article"/>
        <field name="domain_force">[('user_can_write', '=', True)]</field>
        <field name="groups" eval="[(4, ref('base.group_user'))]"/>
    </record>

    <record id="knowledge_member_read_articles" model="ir.rule">
        <field name="name">Read article members</field>
        <field name="model_id" ref="model_knowledge_article_member"/>
        <field name="perm_write" eval="False"/>
        <field name="perm_create" eval="False"/>
        <field name="perm_unlink" eval="False"/>
        <field name="domain_force">[('article_id.user_has_access', '=', True)]</field>
        <field name="groups" eval="[(4, ref('base.group_user'))]"/>
    </record>

    <record id="knowledge_member_write_articles" model="ir.rule">
        <field name="name">Write article members</field>
        <field name="model_id" ref="model_knowledge_article_member"/>
        <field name="domain_force">[('article_id.user_can_write', '=', True)]</field>
        <field name="groups" eval="[(4, ref('base.group_user'))]"/>
    </record>

    <record id="knowledge_member_write_articles_system" model="ir.rule">
        <field name="name">All article members</field>
        <field name="model_id" ref="model_knowledge_article_member"/>
        <field name="domain_force">[(1,'=',1)]</field>
        <field name="groups" eval="[(4, ref('base.group_system'))]"/>
    </record>

    <record id="knowledge_user_article_favourites" model="ir.rule">
        <field name="name">Favourite articles</field>
        <field name="model_id" ref="model_knowledge_article_favourite"/>
        <field name="domain_force">[('user_id', '=', user.id), ('article_id.user_has_access', '=', True)]</field>
        <field name="groups" eval="[(4, ref('base.group_portal')), (4, ref('base.group_user'))]"/>
    </record>

    <record id="knowledge_system_article_favourites" model="ir.rule">
        <field name="name">All Favourite articles - Admin</field>
        <field name="model_id" ref="model_knowledge_article_favourite"/>
        <field name="domain_force">[(1, '=', 1)]</field>
        <field name="groups" eval="[(4, ref('base.group_system'))]"/>
    </record>

    <record id="knowledge_user_invite_members" model="ir.rule">
        <field name="name">Invite members</field>
        <field name="model_id" ref="model_knowledge_invite_wizard"/>
        <field name="domain_force">[('article_id.user_can_write', '=', True)]</field>
        <field name="groups" eval="[(4, ref('base.group_system'))]"/>
    </record>
</odoo>
