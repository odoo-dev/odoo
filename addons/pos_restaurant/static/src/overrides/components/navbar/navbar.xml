<?xml version="1.0" encoding="UTF-8"?>
<templates id="template" xml:space="preserve">
    <t t-name="pos_restaurant.Navbar" t-inherit="point_of_sale.Navbar" t-inherit-mode="extension">
        <xpath expr="//DropdownItem[contains(text(), 'Backend')]" position="before">
            <t t-if="pos.mainScreen.component.name == 'FloorScreen'">
                <DropdownItem t-if="showEditPlanButton" onSelected="() => this.pos.toggleEditMode()">
                    Edit Plan
                </DropdownItem>
            </t>
            <DropdownItem t-if="pos.mainScreen.component.name == 'FloorScreen'" onSelected="() => this.onSwitchButtonClick()">
                Switch Floor View
            </DropdownItem>
        </xpath>
        <xpath expr="//div[hasclass('pos-leftheader')]" position="inside">
            <div t-if="pos.config.module_pos_restaurant" class="d-flex align-items-stretch flex-grow-1 gap-1 overflow-hidden position-relative">
                <button class="back-button btn btn-light btn-light-purple btn-lg lh-lg" t-attf-class="{{ isFloorScreenActive() ? 'active' : '' }}" t-on-click="onClickPlanButton">
                    Plan
                </button>
                <button t-if="showSwitchTableButton" class="btn btn-light btn-lg lh-lg" t-on-click="() => this.switchTable()">Table</button>   

                <div id="table-free-order-container">
                    <div t-if="showTableNumber" t-esc="getTable().getName()"
                        class="table-free-order-label d-flex align-items-center cursor-pointer"
                        t-on-click="() => this.switchTable()"
                    />   

                    <div t-if="pos.get_order() and !pos.get_order()?.table_id" class="table-free-order-label d-flex align-items-center">
                        <t t-if="!ui.isSmall" t-esc="pos.get_order().getFloatingOrderName()"/>
                    </div>        
                </div>
                <t t-if="!pos.orderToTransferUuid">
                    <div t-if="!pos.selectedOrderUuid and !pos.selectedTable" class="d-flex overflow-x-auto">
                        <div t-if="!ui.isSmall" class="me-1 my-1 border-end border-dark-subtle"/>
                        <ListContainer items="getFloatingOrders()" t-slot-scope="scope">
                            <t t-set="order" t-value="scope.item"/>
                            <button t-esc="order.getFloatingOrderName()" class="btn btn-light tab text-nowrap border-light-subtle" t-on-click="() => this.selectFloatingOrder(order)"/>
                        </ListContainer>
                    </div>
                    <button t-if="!pos.selectedOrderUuid" class="btn btn-light btn-lg border-transparent lh-lg" style="padding: 0.3125rem 0.625rem;" t-on-click="newFloatingOrder">
                        <i class="fa fa-fw fa-lg fa-plus-circle" aria-hidden="true"/>
                    </button>
                </t>
                <div class="d-flex align-items-center" t-else="">
                    <strong class="ms-2">
                        Select table to transfer order
                    </strong>
                </div>
            </div>
        </xpath>
    </t>
</templates>
